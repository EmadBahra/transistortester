\chapter{Генератор сигналов}

Режимы генерации различных сигналов доступны только для ATmega328.
Итак, Вы должны включить меню дополнительных функций опцией WITH\_MENU в Makefile.
Меню дополнительных функций вызывается продолжительным (>~\(300~ms\)) нажатием на кнопку 
{\bf TEST}. Функции дополнительного меню отображаются во второй строке дисплея. Вы можете 
выбрать отображаемую функцию длительным нажатием кнопки {\bf TEST}. 
Следующая функция дополнительного меню отображается автоматически через 5 секунд автоматически 
или после короткого нажатия кнопки {\bf TEST}.

\label{sec:generation}
\section{Генератор частоты}
Генератор частоты запускается, если Вы выбрали «f-Generator» (Генератор частоты) длительным 
нажатием кнопки {\bf TEST} из меню дополнительных функций.  
Сигнал частоты выводится через резистор \(680~\Omega\) на тестовый контакт TP2.
Тестовый контакт TP1 программно подключается к GND.

Частоты создаются при помощи 16-разрядного счетчика из тактовой частоты CPU (\(8~MHz\) или \(16~MHz\)).
В настоящее время кратковременным нажатием кнопки {\bf TEST} можно выбрать предопределённую 
частоту (от \(2~MHz\) до \(1~Hz\)).
При длительном нажатии кнопки {\bf TEST}, осуществляется возврат в меню для выбора 
других дополнительных функций.  

\section{Широтно-импульсный генератор}
Широтно-импульсный генератор запускается, если Вы выбрали функцию «10-Bit PWM» (16-битный ШИМ)
длительным нажатием кнопки {\bf TEST} из меню дополнительных функций.
Частота через резистор \(680~\Omega\) выводится на тестовый контакт TP2.
Тестовый контакт TP1 программно подключается к GND.
Частота выходного сигнала всегда равна частоте CPU разделенной на 1024.
Для CPU с тактовой частотой \(8~MHz\) частота выходного сигнала составляет \(7812.5~Hz\).
При нажатии кнопки {\bf TEST}, возможно изменение ширины только положительного импульса.
При кратковременном нажатии кнопки {\bf TEST}, Вы можете увеличивать ширину импульса до 
\(99~\%\) с шагом \(1~\%\). При более длительном удержании кнопки, изменение ширины 
импульса происходит с шагом 10~\%.   
Если значение ширины импульса достигает \(99~\%\), то из результата вычитается 100.
При значении ширины импульса \(0~\%\) генерируется положительный импульс самой малой ширины. 
